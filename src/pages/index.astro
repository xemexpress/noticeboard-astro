---
import Layout from "../layouts/Layout.astro";
import { getImage } from "astro:assets";
import { OUR_BRAND } from "../utils/constants";
import { getEntryBySlug } from "astro:content";
import ProgressiveImage from "../components/ProgressiveImage";

// SEO related
const title = `${OUR_BRAND.NAME} - 住戶資訊天地`;
const description = OUR_BRAND.DESCRIPTION;

const noticeboard = await getEntryBySlug("notices", "first");
const { image, updatedAt } = noticeboard.data;

const highResImage = await getImage({
    src: image,
    width: 2100, // Specify the dimensions you need
    height: 1400,
    format: "webp",
    quality: 90,
});

const lowResImage = await getImage({
    src: image,
    width: 300,
    height: 200,
    format: "webp",
    quality: 30,
});
---

<Layout title={title} description={description}>
    <div class="max-w-4xl mx-auto px-4 py-8">
        <h1 class="text-2xl font-semibold mb-6 text-center text-brand-primary">
            住戶資訊天地
        </h1>
        <div
            class="bg-white shadow-lg rounded-lg overflow-hidden border-4 border-brand-primary"
        >
            <ProgressiveImage
                client:load
                lowResSrc={lowResImage.src}
                highResSrc={highResImage.src}
                alt="The Hermitage Noticeboard"
            />
        </div>
        <p class="mt-4 text-sm text-gray-600 text-center">
            照片更新時間: {
                updatedAt.toLocaleString("zh-HK", {
                    timeZone: "Asia/Hong_Kong",
                })
            }
        </p>
    </div>
</Layout>
